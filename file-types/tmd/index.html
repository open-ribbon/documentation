<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Team Open-Ribbon">
    
    <link rel="shortcut icon" href="../../img/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>TMD - PlayStation Model - Open-Ribbon's Vib-Ribbon Technical Database</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "TMD - PlayStation Model", url: "#_top", children: [
              {title: "File Makeup", url: "#file-makeup" },
              {title: "TMD Implementations", url: "#tmd-implementations" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../vb-vh/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../vb-vh/" class="btn btn-xs btn-link">
        VB/VH - PlayStation Audio
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../tim/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../tim/" class="btn btn-xs btn-link">
        TIM - PlayStation Image
      </a>
    </div>
    
  </div>

    

    <style>
.flex-container {
  display: flex;
  flex-wrap: nowrap;
}
</style>

<h1 id="tmd-playstation-model">TMD - PlayStation Model</h1>
<p>Like every three-dimensional object in a video game, a character such as Vibri, would need a 3d model in order to convey what the player is doing. Despite previous confusion within the confines of the Vib-Ribbon community, this is no exception for Vibri. The format in which Vib-Ribbon uses for its models is the TMD format, which is useful for keeping filesize down in order to integrate Vib-Ribbon into the RAM of the Playstation. These files tend to be small to the point where multiple tens, or maybe even a couple hundred could theoretically fit inside the base 2 megabytes of system memory on the PlayStation.</p>
<p>Vib-Ribbon makes use of these model files rather extensively compared other games due to the visual style of the game. From characters, to the ribbon itself, to even the font that the game uses, everything that is a vector traces back to one of these models. However, if imported straight into a program, such as Blender, you’ll only get pieces of a model that aren’t put together. It’s up to the ANM files to put them together.</p>
<p>And because of the fact that the objects that make up each file are polylines, as opposed to polygons, they may render as invisible or otherwise incorrect or strange unless the user turns on some sort of wireframe mode.</p>
<h2 id="file-makeup">File Makeup</h2>
<table>
<thead>
<tr>
<th style="text-align: center;">Header</th>
<th style="text-align: center;">Object Table</th>
<th style="text-align: center;">Primitives</th>
<th style="text-align: center;">Vertices</th>
<th style="text-align: center;">Normals</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>The short rundown of what each of the parts of the file do.</p>
<ul>
<li>The header indicates the version of the TMD, any flags that the TMD needs to set and the number of objects in the file.</li>
<li>The object table, you guessed it, lists the pointers to all the objects.</li>
<li>Primitives are arrangments of drawing packets, being: polygons, lines, and sprites.</li>
<li>Vertices, obviously, are the points for all the objects.</li>
<li>Normals help with shading, which is completely irrelevant for vib-ribbon.</li>
</ul>
<h2 id="tmd-implementations">TMD Implementations</h2>
<h3 id="fonts">Fonts</h3>
<p>As stated before, all vector objects are loaded from TMD files, including the font files. The PAL version of the game uses one of two main font files depending on what the language is set to from the menu. An oddity that can be seen is that all of the Japanese files, including the katakana font, is still in the European version, inside <code>01_FILES</code>, but are left only used in the Japanese release.</p>
<p>Each <code>FONT</code> folder contains two TMDs, <code>FE_FONT.TMD</code> (<code>01_FONT.TMD</code> for Japanese) and <code>MARK.TMD</code>. The actual symbols used to make sentences are made from <code>FE_FONT.TMD</code>, whereas <code>MARK.TMD</code> contains shape-represenations for scoring. One thing to note is that the numbers saved in <code>01_FONT.TMD</code> are wider than they are in <code>FE_FONT.TMD</code>, probably because of the katakana also written in the Japanese file.</p>
<p><strong>MARK.TMD</strong>
<center><img src="../../img/mark.png"></img></center> </p>
<p><strong>FE_FONT.TMD</strong>
<center><img src="../../img/fe_font.png"></img></center> </p>
<p><strong>01_FONT.TMD</strong>
<center><img src="../../img/01_font.png"></img></center> </p>
<h3 id="vibri">Vibri</h3>
<p>There are three variants of Vibri's rabbit form inside of the games files, a different variant is used for each executable of the game. These three files, to reduce confusion, only contain Vibri’s rabbit form, as her other forms are located in other files. A major thing about Vibri's model to be known is that this one is not meant to be looked at from all directions, as this model takes a slightly more "two-dimensional" approach.</p>
<p>The one used for MAIN_T is located in <code>TITLE\FILES\MOVIE\TITLE\</code>, which is a 8120-byte file named <code>VIBRI.TMD</code>. It is used for the title screen, and contains most of the same objects as MAIN_G's Vibri model, with the exception of omitting a few of them, which seem to relate to arms.</p>
<p>MAIN_G's Vibri rabbit model is a 8528-byte file titled two different things depending on where it comes from. As such, the same file is located in two different places at all times, <code>GAME\xx_FILES\TITLE\VIBRI\</code> and <code>GAME\xx_FILES\CHARA\PEELOO\</code>, where the files are named <code>VIBRI.TMD</code> and <code>MODEL.TMD</code> respectively. The former is used for the game menus, where the other is used for gameplay. During gameplay, the game also loads her other forms from the <code>FROG</code>, <code>SNAKE</code>, and <code>SUPER</code> folders, also located in <code>GAME\xx_FILES\CHARA\</code>, all of which also called <code>MODEL.TMD</code>. The folders also contain all the ANM files for the respective forms, as they of course, cannot share the same ones.</p>
<p>And finally, the third variant of the Vibri model is the smallest, being comprised of only 4400 bytes. This one is used during MAIN_K's execution -- which is the tutorial. It is not only smaller in file size, but it is also curiously smaller in <em>physical</em> size. This file is located in <code>KIOSK\xx_FILES\MOVIE\KIOSK2\</code> and is named <code>MODEL.TMD</code>.</p>
<p>As stated before, Vibri's model has to adapt to the position of the camera as all of her limbs are flat, taking the camera to a different / unintended position reveals a few things about Vibri that suggest that the third dimension was used to help make certain details.
<center><img src="../../img/menu_vibri_camera_angle.gif"></img></center> </p>
<div class="flex-container">
<div><br>Certain angles are still applied to some of the limbs of Vibri. In the example gif for example, you can notice how her feet and her arms are tilted, which is usually not though about when rendered into the game. Her torso is also a full cone-like structure rather than a plane like the rest of the model's objects.
<br><br>
Perhaps the most noticable, her eyes also pertrude from the rest of the face, likely as either a way to make them appear thinner than they really are, or to make them scale more naturally when turning. A final thing you may notice is the triangle that appears on her head. This might have been used as a way to help center the head during the animating process. This triangle of course, does not show up in the actual game.</div>
<div><img src="../../img/menu_vibri_eyes_demonstration.gif" width="1600"></img></div>
</div>
<p><br></p>
<p>In all of the models for Vibri, the eyes are only visible from one side because the PlayStation is able to hide any object from the backside.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../vb-vh/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../vb-vh/" class="btn btn-xs btn-link">
        VB/VH - PlayStation Audio
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../tim/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../tim/" class="btn btn-xs btn-link">
        TIM - PlayStation Image
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>